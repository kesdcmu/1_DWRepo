sources:
  - name: main
    tables:
      - name: bike_data
        description: "Citi Bike Data Source Documentation (description supported by chatgbt)
        Data Source
        The Citi Bike data is made available by [New York City Bike Share (NYCBS)](https://www.citibikenyc.com/). It provides valuable insights into rider behavior, encompassing location, timing, distances, station popularity, and day-of-week trends.
        
        Data Usage
          - Comply with the [NYCBS Data Use Policy](https://www.citibikenyc.com/data-sharing-policy).
          - Maintain data privacy and confidentiality.
          - Attribute NYCBS when using the data in publications or applications.

        Access
          You can access the data through the [NYCBS Data Portal](https://www.citibikenyc.com/system-data) or by downloading data files and utilizing APIs as described in the data use policy."
        columns:
          - name: tripduration
            data_type: CHARACTER VARYING(256)
            description: "Trip Duration (seconds)"
            tests:
              - not_null ## Data reliability: Null values in tripduration removed for integrity.
              - dbt_expectations.expect_column_to_exist
          - name: starttime
            data_type: CHARACTER VARYING(256)
            description: "Start Time and Date"
            tests: 
             - dbt_expectations.expect_column_to_exist
          - name: stoptime
            data_type: CHARACTER VARYING(256)
             - dbt_expectations.expect_column_to_exist
            description: "Stop Time and Date"
          - name: start station id
            data_type: CHARACTER VARYING(256)
            description: "start station id"
            tests:
              - dbt_expectations.expect_column_to_exist
          - name: start station name
            data_type: CHARACTER VARYING(256)
            description: "start station name"
          - name: start station latitude
            data_type: CHARACTER VARYING(256)
            description: "start station latitude"
          - name: start station longitude
            data_type: CHARACTER VARYING(256)
            description: "start station longitude"
          - name: end station id
            data_type: CHARACTER VARYING(256)
            description: "End station ID"
          - name: end station name
            data_type: CHARACTER VARYING(256)
            description: "End station name"
          - name: end station latitude
            data_type: CHARACTER VARYING(256)
            description: "End station latitude"
          - name: end station longitude
            data_type: CHARACTER VARYING(256)
            description: "End station longitude"
          - name: bikeid
            data_type: CHARACTER VARYING(256)
            description: "Bike ID"
            tests: 
             - not_null ## Data reliability: Null values in bike_ID removed for integrity.
             - dbt_expectations.expect_column_to_exist
          - name: usertype
            data_type: CHARACTER VARYING(256)
            description: "User Type (Customer = 24-hour pass or 3-day pass user; Subscriber = Annual Member)"
            tests: 
             - dbt_expectations.expect_column_to_exist
          - name: birth year
            data_type: CHARACTER VARYING(256)
            description: "Year of Birth"
          - name: gender
            data_type: CHARACTER VARYING(256)
            description: "Year of Birth"
          - name: ride_id
            data_type: CHARACTER VARYING(256)
            description: "Ride ID"
            tests: 
             - not_null ## Data reliability: Null values in ride_ID removed for integrity.
             - dbt_expectations.expect_column_to_exist
          - name: rideable_type
            data_type: CHARACTER VARYING(256)
            description: "Rideable type"
          - name: started_at
            data_type: CHARACTER VARYING(256)
            description: "Started at"
          - name: ended_at
            data_type: CHARACTER VARYING(256)
            description: "Ended at"
          - name: start_station_name
            data_type: CHARACTER VARYING(256)
            description: "Start station name"
          - name: start_station_id
            data_type: CHARACTER VARYING(256)
            description: "Start station ID"
          - name: end_station_name
            data_type: CHARACTER VARYING(256)
            description: "End station name"
          - name: end_station_id
            data_type: CHARACTER VARYING(256)
            description: "End station ID"
          - name: start_lat
            data_type: CHARACTER VARYING(256)
            description: "Start latitude"
            tests: 
             - not_null ## Data reliability: Null values in start_lat not present from source dbt tests
          - name: start_lng
            data_type: CHARACTER VARYING(256)
            description: "Start longitude"
            tests: 
             - not_null ## Data reliability: Null values in start_lng not present from source dbt tests
          - name: end_lat
            data_type: CHARACTER VARYING(256)
            description: "End Latitude"
            tests: 
             - not_null ## Data reliability: Null values in end_lat not present from source dbt tests
          - name: end_lng
            data_type: CHARACTER VARYING(256)
            description: "End Longitude"
            tests: 
             - not_null ## Data reliability: Null values in end_lng not present from source dbt tests
          - name: member_casual
            data_type: CHARACTER VARYING(256)
            description: "Member or casual ride"
            tests: 
             - not_null ## Data reliability: Null values in member_casual removed for integrity.
          - name: filename
            data_type: CHARACTER VARYING(256)
            description: "fine_name"

      - name: central_park_weather
        description: "NOAA GHCND Data Source Documentation (documentation supported by chatgbt)
          Data Source
          The data source is provided by the National Oceanic and Atmospheric Administration (NOAA) and offers access to the Global Historical Climatology Network - Daily (GHCND) weather station data. This data is valuable for analyzing historical weather conditions for specific weather stations.
          Data Source URL [NOAA GHCND Data](https://www.ncdc.noaa.gov/cdo-web/datasets/GHCND/stations/GHCND:USW00094728/detail)
          Provider National Oceanic and Atmospheric Administration (NOAA)

          Data Description
          The GHCND dataset provides comprehensive historical weather data for weather stations around the world, including the United States. It includes information on daily temperature, precipitation, wind, and various other meteorological variables.

          Accessing the Data
          To access the NOAA GHCND data, you can use the provided URL: [GHCND Data Station Detail](https://www.ncdc.noaa.gov/cdo-web/datasets/GHCND/stations/GHCND:USW00094728/detail).
          This URL provides detailed information about the specific weather station (GHCND:USW00094728) and allows you to download data from that station."
        columns:
          - name: station
            description: "The TLC (NYC Taxi and Limousine Commission) license number of the dispatching base"
            data_type: CHARACTER VARYING(256)
            tests: 
              - not_null
              - dbt_expectations.expect_column_to_exist
            relationships: ## Code Adopted from week 3 lecture 5 Speed run 
              to: source('main','fhv_bases')
              field: base_number
          - name: name
            description: "The official name of the base entity"
            data_type: CHARACTER VARYING(256)
            tests: 
              - not_null
              - dbt_expectations.expect_column_to_exist
            relationships: ## Code Adopted from week 3 lecture 5 Speed run 
              to: source('main','fhv_bases')
              field: base_name
          - name: date
            data_type: CHARACTER VARYING(256)
            description: "DATE is the year of the record (4 digits) followed by month (2 digits) and day (2 digits)."
            tests:
              - not_null
              - unique
          - name: awnd
            data_type: CHARACTER VARYING(256)
            description: "AWND = Average daily wind speed (meters per second or miles per hour as per user preference)"
          - name: prcp
            data_type: CHARACTER VARYING(256)
            description: "PRCP = Precipitation (mm or inches as per user preference, inches to hundredths on Daily Form pdf file)"
          - name: snow
            data_type: CHARACTER VARYING(256)
            description: "SNOW = Snowfall (mm or inches as per user preference, inches to tenths on Daily Form pdf file)"
          - name: snwd
            data_type: CHARACTER VARYING(256)
            description: "Snow depth (mm or inches as per user preference, inches on Daily Form pdf file)"
          - name: tmax
            data_type: CHARACTER VARYING(256)
            description: "TMAX = Maximum temperature (Fahrenheit or Celsius as per user preference, Fahrenheit to tenths on Daily Form pdf file"
            tests:
             - not_null
          - name: tmin
            data_type: CHARACTER VARYING(256)
            description: "TMIN = Minimum temperature (Fahrenheit or Celsius as per user preference, Fahrenheit to tenths on Daily Form pdf file"
            tests:
             - not_null
          - name: filename
            data_type: CHARACTER VARYING(256)
            description: "file_name"

      - name: fhv_bases
        description: "Monthly report including total dispatched trips, total dispatched shared trips, and unique dispatched vehicles aggregated by FHV (For-Hire Vehicle) base. These have been tabulated from raw trip record submissions made by bases to the NYC Taxi and Limousine Commission (TLC).
          This dataset is typically updated monthly on a two-month lag, as bases have until the conclusion of the following month to submit a month of trip records to the TLC. In example, a base has until Feb 28 to submit complete trip records for January. Therefore, the January base aggregates will appear in March at the earliest. The TLC may elect to defer updates to the FHV Base Aggregate Report if a large number of bases have failed to submit trip records by the due date.
          Note: The TLC publishes base trip record data as submitted by the bases, and we cannot guarantee or confirm their accuracy or completeness. Therefore, this may not represent the total amount of trips dispatched by all TLC-licensed bases. The TLC performs routine reviews of the records and takes enforcement actions when necessary to ensure, to the extent possible, complete and accurate information."
        columns:
          - name: base_number 
            data_type: CHARACTER VARYING(256) 
            description: "The TLC (NYC Taxi and Limousine Commission) license number of the dispatching base "
            tests:
              - unique 
              - not_null
              - dbt_expectations.expect_column_to_exist  
          - name: base_name 
            data_type: CHARACTER VARYING(256)
            description: "The official name of the base entity "
            tests:   
              - not_null
              - dbt_expectations.expect_column_to_exist 
          - name: dba 
            data_type: CHARACTER VARYING(256)
            description: "The “doing business as” name of the base "   
          - name: dba_category 
            data_type: CHARACTER VARYING(256)
            description: "Data description not provided online "
          - name: filename 
            data_type: CHARACTER VARYING(256)
            description: "file_name "

      - name: fhv_tripdata
        description: "For-Hire Vehicle (“FHV”) trip records include fields capturing the dispatching base license number and the pick-up date, time, and taxi zone location ID. These records are generated from the FHV Trip Record submissions made by bases."
        columns:
          - name: dispatching_base_num
            data_type: CHARACTER VARYING(256)
            description: "The TLC Base License Number of the base that dispatched the trip"
            tests: 
             - not_null
             - dbt_expectations.expect_column_to_exist  
            relationships:
              to: source ('main','fhv_bases')
              field: base_number
          - name: pickup_datetime
            data_type: TIMESTAMP
            description: "The date and time of the trip pick-up"
            tests: 
              - dbt_expectations.expect_column_to_exist
          - name: dropoff_datetime
            data_type: TIMESTAMP
            description: "The date and time of the trip dropoff"
            tests: 
              - dbt_expectations.expect_column_to_exist
          - name: pulocationid
            data_type: DOUBLE
            description: "TLC Taxi Zone in which the trip began"
          - name: dolocationid
            data_type: DOUBLE
            description: "TLC Taxi Zone in which the trip ended"
          - name: sr_flag
            data_type: INTEGER
            description: "Indicates if the trip was a part of a shared ride chain offered by a High Volume FHV company (e.g. Uber Pool, Lyft Line). For shared trips, the value is 1. For non-shared rides, this field is null.  "
          - name: affiliated_base_number
            data_type: CHARACTER VARYING(256)
            description: "Data description not provided online"
          - name: filename
            data_type: CHARACTER VARYING(256)
        description: "file_name"

      
      - name: fhvhv_tripdata
        description: "For-Hire Vehicle (“FHV”) trip records include fields capturing the dispatching base license number and the pick-up date, time, and taxi zone location ID. These records are generated from the FHV Trip Record submissions made by bases."
        columns:
          - name: hvfhs_license_num
            data_type: CHARACTER VARYING(256)
            description: "The TLC license number of the HVFHS base or business As of September 2019, the HVFHS licensees are the following:  
            • HV0002: Juno 
            • HV0003: Uber 
            • HV0004: Via 
            • HV0005: Lyft"
          - name: dispatching_base_num
            data_type: CHARACTER VARYING(256)
            description: "The TLC Base License Number of the base that dispatched the trip"
            tests: 
             - not_null
             - dbt_expectations.expect_column_to_exist  
            relationships: ## Code Adopted from week 3 lecture 5 Speed run 
              to: source('main','fhv_bases')
              field: base_number
          - name: originating_base_num
            data_type: CHARACTER VARYING(256)
            description: "base number of the base that received the original trip request"
            tests: 
             - dbt_expectations.expect_column_to_exist  
            relationships: ## Code Adopted from week 3 lecture 5 Speed run 
              to: source('main','fhv_bases')
              field: base_number
          - name: request_datetime
            data_type: TIMESTAMP
            description: "date/time when passenger requested to be picked up"
            tests: 
             - not_null
             - dbt_expectations.expect_column_to_exist  
          - name: on_scene_datetime
            data_type: TIMESTAMP
            description: "date/time when driver arrived at the pick-up location (Accessible Vehicles-only) "
            tests: 
             - dbt_expectations.expect_column_to_exist  
          - name: pickup_datetime
            data_type: TIMESTAMP
            description: "The date and time of the trip pick-up" 
            tests: 
             - not_null
          - name: dropoff_datetime
            data_type: TIMESTAMP
            description: "The date and time of the trip drop-off"
            tests: 
             - not_null
          - name: pulocationid
            data_type: BIGINT
            description: "TLC Taxi Zone in which the trip began"
            tests: 
             - not_null
             - dbt_expectations.expect_column_to_exist  
          - name: dolocationid
            data_type: BIGINT
            descritption: "TLC Taxi Zone in which the trip ended"

          - name: trip_miles
            data_type: DOUBLE
            description: "total miles for passenger trip"
            tests: 
             - not_null
             - dbt_expectations.expect_column_to_exist  
          - name: trip_time
            data_type: BIGINT
            description: "total time in seconds for passenger trip"
            tests: 
             - not_null
             - dbt_expectations.expect_column_to_exist  
          - name: base_passenger_fare
            data_type: DOUBLE
            description: "base passenger fare before tolls, tips, taxes, and fees"
            tests:
             - not_null
          - name: tolls
            data_type: DOUBLE
            description: "total amount of all tolls paid in trip"
          - name: bcf
            data_type: DOUBLE
            description: "total amount collected in trip for Black Car Fund"
          - name: sales_tax
            data_type: DOUBLE
            description: "total amount collected in trip for NYS sales tax"
          - name: congestion_surcharge
            data_type: DOUBLE
            description: "total amount collected in trip for NYS congestion surcharge"
          - name: airport_fee
            data_type: DOUBLE
            description: "$2.50 for both drop off and pick up at LaGuardia, Newark, and John F. Kennedy airports"
            tests: 
             - dbt_expectations.expect_column_to_exist  
          - name: tips
            data_type: DOUBLE
            description: "total amount of tips received from passenger"
            tests: 
             - dbt_expectations.expect_column_to_exist  
          - name: driver_pay
            data_type: DOUBLE
            description: "total driver pay (not including tolls or tips and net of commission, surcharges, or taxes)"
            tests: 
             - not_null
             - dbt_expectations.expect_column_to_exist  
          - name: shared_request_flag
            data_type: CHARACTER VARYING(256)
            descrition: "Did the passenger agree to a shared/pooled ride, regardless of whether they were matched? (Y/N)"
            tests:
             - not_null
             - accepted_values: 
                 values: ['Y','N']
                 config:
                  severity: warn
          - name: shared_match_flag
            data_type: CHARACTER VARYING(256)
            description: "Did the passenger share the vehicle with another passenger who booked separately at any point during the trip? (Y/N)"
            tests:
             - not_null
             - accepted_values: 
                 values: ['Y','N']
                 config:
                  severity: warn
          - name: access_a_ride_flag
            data_type: CHARACTER VARYING(256)
            description: "Was the trip administered on behalf of the Metropolitan Transportation Authority (MTA)? (Y/N)"
            tests:
             - not_null
             - accepted_values: 
                 values: ['Y','N']
                 config:
                  severity: warn
          - name: wav_request_flag
            data_type: CHARACTER VARYING(256)
            description: "Did the passenger request a wheelchair-accessible vehicle (WAV)? (Y/N)"
            tests:
             - not_null
             - accepted_values: 
                 values: ['Y','N']
                 config:
                  severity: warn
          - name: wav_match_flag
            data_type: CHARACTER VARYING(256)
            description: "Did the trip occur in a wheelchair-accessible vehicle (WAV)? (Y/N)"
            tests:
             - not_null
             - accepted_values: 
                 values: ['Y','N']
                 config:
                  severity: warn
          - name: filename
            data_type: CHARACTER VARYING(256)
            description: "file_name"

## Tables need labeling and testing, per Lecture 5 not required for HW3.
      - name: green_tripdata
        columns:
          - name: vendorid
            data_type: BIGINT
          - name: lpep_pickup_datetime
            data_type: TIMESTAMP
          - name: lpep_dropoff_datetime
            data_type: TIMESTAMP
          - name: store_and_fwd_flag
            data_type: CHARACTER VARYING(256)
          - name: ratecodeid
            data_type: DOUBLE
          - name: pulocationid
            data_type: BIGINT
          - name: dolocationid
            data_type: BIGINT
          - name: passenger_count
            data_type: DOUBLE
          - name: trip_distance
            data_type: DOUBLE
          - name: fare_amount
            data_type: DOUBLE
          - name: extra
            data_type: DOUBLE
          - name: mta_tax
            data_type: DOUBLE
          - name: tip_amount
            data_type: DOUBLE
          - name: tolls_amount
            data_type: DOUBLE
          - name: ehail_fee
            data_type: INTEGER
          - name: improvement_surcharge
            data_type: DOUBLE
          - name: total_amount
            data_type: DOUBLE
          - name: payment_type
            data_type: DOUBLE
          - name: trip_type
            data_type: DOUBLE
          - name: congestion_surcharge
            data_type: DOUBLE
          - name: filename
            data_type: CHARACTER VARYING(256)

      - name: yellow_tripdata
        columns:
          - name: vendorid
            data_type: BIGINT
          - name: tpep_pickup_datetime
            data_type: TIMESTAMP
          - name: tpep_dropoff_datetime
            data_type: TIMESTAMP
          - name: passenger_count
            data_type: DOUBLE
          - name: trip_distance
            data_type: DOUBLE
          - name: ratecodeid
            data_type: DOUBLE
          - name: store_and_fwd_flag
            data_type: CHARACTER VARYING(256)
          - name: pulocationid
            data_type: BIGINT
          - name: dolocationid
            data_type: BIGINT
          - name: payment_type
            data_type: BIGINT
          - name: fare_amount
            data_type: DOUBLE
          - name: extra
            data_type: DOUBLE
          - name: mta_tax
            data_type: DOUBLE
          - name: tip_amount
            data_type: DOUBLE
          - name: tolls_amount
            data_type: DOUBLE
          - name: improvement_surcharge
            data_type: DOUBLE
          - name: total_amount
            data_type: DOUBLE
          - name: congestion_surcharge
            data_type: DOUBLE
          - name: airport_fee
            data_type: DOUBLE
          - name: filename
            data_type: CHARACTER VARYING(256)
